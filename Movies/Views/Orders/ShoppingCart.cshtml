@using Movies.Data.ViewModels
@model ShoppingCartVM
@{
    ViewData["Title"] = "shopping cart summary";
}


<div class="row">
    <div class="col-md-8 offset-2">
        <div class="text-centre">
            <h2>
                Shopping cart summary
            </h2>
            <table class="table">
                <thead>
                    <tr>
                        <th>selected amount</th>
                        <th>Movie</th>
                        <th>Price</th>
                        <th>Subtotal</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.ShoppingCart.ShoppingCartItems)
                    {
                        <tr>
                            <td class="align-middle">@item.Amount</td>
                            <td class="align-middle">@item.Movie.Name</td>
                            <td class="align-middle">@item.Movie.Price.ToString("c")</td>
                            <td class="align-middle">@((item.Amount * item.Movie.Price).ToString("c"))</td>
                            <td class="align-middle">
                                <a class="text-danger" asp-controller="Orders" asp-action="RemoveItemsFromShoppingCart"
                               asp-route-id="@item.Movie.Id">
                                    <i class="bi bi-cart-dash"></i>
                                </a>
                                |
                                <a class="text-success" asp-controller="Orders" asp-action="AddItemsInShoppingCart"
                               asp-route-id="@item.Movie.Id">
                                    <i class="bi bi-cart-plus"></i>
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="2"></td>
                        <td>
                            <b>Total:</b>
                        </td>
                        <td>
                            @Model.ShoppingCartTotal.ToString("c")
                        </td>
                        <td></td>
                    </tr>
                </tfoot>
            </table>
            <div class="text-center">
                <div class="btn-group">
                    @*<a class="btn btn-outline-primary" asp-action="CompleteOrder">
                    Complete your order
                    </a>*@
                   @* <div>
                        <a class="btn btn-outline-warning" type="button" id="paypal-btn">Pay now</a>
                    </div>*@

                    <span style="padding:5px"></span>
                    
                    <span style="padding:5px"></span>

                    <a class="btn btn-outline-success" asp-controller="Movies" asp-action="Index">
                        Add More Items
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
@section scripts{
    <script src="https://www.paypalobjects.com/api/checkout.js"></script>
    <script>
        paypal.Button.render({
            //Configure environment
            env: 'sandbox',
            client: {
                sandbox: 'AQgDcL4lDQhvBgGrSMqZkOYfLFoCmEkbmTHRhD964RyeVskADk6RLOD3Avtuy-sd4dMFipYoBH0L4hQ9'
            },

    //        //Customize button
    //        locale: 'en_US',
    //        style: {
    //            size: 'small',
    //            color: 'gold',
    //            shape: 'pill'
    //        },
    //        commit: true,

    //        //setup payment
    //        payment: function (data, actions) {
    //            console.log("payment setup");
    //        },

    //        // Execute payment
    //        onAuthorize: function (data, actions) {
    //            consoloe.log("payment executed");
    //        }

    //    }, '#paypal-btn')

              paypal.Buttons({
                  style: {
                      layout: 'vertical',
                      color: 'blue',
                      shape: 'rect',
                      label: 'paypal'
                  }
              }).render('#paypal-button-container');
    </script>
}
